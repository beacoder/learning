lisp practice

;; show contents of the active region
(defun show_region_contents (beg end)
  "show active region contents"
  (interactive "r")
  (if (region-active-p)
      (progn
        (message (buffer-substring beg end))
        )
    )
  )

;; query user's name and age  
(defun query-user (x y)
  "query user's info"
  (interactive "sEnter friend's name: \nnEnter friend's age: ")
  (message "Name is: %s, Age is: %d" x y)
  )

;; get user input as a list
(defun read-list (arg)
  "Prompt user to enter a string, with input history support."
  (interactive (list (read-string "Your name is:")) )
  (message "String is 「%s」." arg)
  )

;; read all lines in a file and print the last line 
(defun read-lines (file)
  "Return a list of lines in FILE."
  (interactive "sPlease Enter The File Name:")
  (with-temp-buffer
    (insert-file-contents file)
    (mapc (lambda (args) (message "last line is %s" args) )
    (split-string
	   (buffer-string) "\n" t)
	  )
    ) )

;; Insert current date-time string in full ISO 8601 format.
(defun insert-date-time ()
  "Insert current date-time string in full ISO 8601 format.
  Example: 2010-11-29T23:23:35-08:00"
  (interactive)
  (when (region-active-p)
    (delete-region (region-beginning) (region-end) )
    )
  (insert
   (concat
    (format-time-string "%Y-%m-%dT%T")
    ((lambda (x) (concat (substring x 0 3) ":" (substring x 3 5)))
     (format-time-string "%z")))))

;; use defadvice to override function switch-to-buffer 
(defadvice switch-to-buffer (before existing-buffer 
				    activate compile) 
  "When interactive, switch to existing buffers only, 
unless given a prefix argument." 
  (interactive 
   (list (read-buffer "Switch to buffer: "  
		      (other-buffer) 
		      (null current-prefix-arg)))))
		      
